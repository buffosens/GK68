webpackJsonp([2,3,5,14],{109:function(e,t,o){"use strict";function i(e){o(551)}Object.defineProperty(t,"__esModule",{value:!0});var n=o(542),l=o(550),s=o(26),a=i,r=s(n.a,l.a,!1,a,null,null);t.default=r.exports},110:function(e,t,o){"use strict";function i(e){o(556)}Object.defineProperty(t,"__esModule",{value:!0});var n=o(543),l=o(554),s=o(26),a=i,r=s(n.a,l.a,!1,a,null,null);t.default=r.exports},111:function(e,t,o){"use strict";function i(e){o(557)}Object.defineProperty(t,"__esModule",{value:!0});var n=o(544),l=o(555),s=o(26),a=i,r=s(n.a,l.a,!1,a,null,null);t.default=r.exports},119:function(e,t,o){"use strict";function i(e){o(609)}Object.defineProperty(t,"__esModule",{value:!0});var n=o(576),l=o(598),s=o(26),a=i,r=s(n.a,l.a,!1,a,null,null);t.default=r.exports},542:function(e,t,o){"use strict";t.a={data:function(){return{isstatic:!0,loading:!0,disabled:!1,color:"red",precolors:["#ff0000","#ffff00","#00ff00","#00ffff","#0000ff","#ff00ff","#cc0019","#ff2a00","#ff7200","#ffc000","#f9ff00","#8aff00","#00ff4e","#aa00ff","#00a59b","#14ae67","#28a7e1","#0d6fb8","#122a88","#171c61","#601986","#920783","#a40a5e","#800080","#ff4500","#00ced1","#00c2ff","#ff00aa","#ffffff","#000000"],colorhex:"#FF0000",hueh:130,huepostop:0,colorboxposright:0,colorboxpostop:0,colorbarmousedown:!1,colorboxmousedown:!1,issellcode:!1}},props:[],created:function(){},mounted:function(){this.initColorPicker()},computed:{},watch:{colorhex:function(e,t){e!=t&&(DEVICE.isEditStaticLE||this.triggerSelLeCode())}},methods:{initColorPicker:function(){this.hueh=this.$refs.colorpbox.querySelector(".color-bar").offsetHeight,this.huepostop=0,this.colorboxposright=0,this.colorboxpostop=0},getElementPageLeft:function(e){for(var t=e.offsetLeft,o=e.offsetParent;null!=o;)t+=o.offsetLeft+(o.offsetWidth-o.clientWidth)/2,o=o.offsetParent;return t},getElementPageTop:function(e){for(var t=e.offsetTop,o=e.offsetParent;null!=o;)t+=o.offsetTop+(o.offsetHeight-o.clientHeight)/2,o=o.offsetParent;return t},setHuePos:function(e){var t=this;t.colorbarmousedown=!0,t.moveHuePos(e)},moveHuePos:function(e){var t=this;if(t.colorbarmousedown){var o=e.currentTarget.parentNode.parentNode,i=o.querySelector(".color-current"),n=(o.querySelector("input"),t.getElementPageTop(o));e.clientY-(n+6)<=0?t.huepostop=0:e.clientY-(n+6)>=t.hueh?t.huepostop=t.hueh:t.huepostop=e.clientY-(n+6);var l=parseInt(this.huepostop/t.hueh*360);i.style.background="hsl("+l+",100%,50%)",t.resetColor()}},setColorBoxPos:function(e){var t=this;t.colorboxmousedown=!0,t.moveColorBoxPos(e)},moveColorBoxPos:function(e){var t=this;if(t.colorboxmousedown){var o=e.currentTarget.parentNode.parentNode,i=(o.querySelector(".color-current"),o.querySelector("input"),t.getElementPageTop(o)),n=t.getElementPageLeft(o);e.clientY-(i+6)<=0?t.colorboxpostop=0:e.clientY-(i+6)>=t.hueh?t.colorboxpostop=t.hueh:t.colorboxpostop=e.clientY-(i+6),e.clientX-(n+6)<=0?t.colorboxposright=t.hueh:e.clientX-(n+6)>=t.hueh?t.colorboxposright=0:t.colorboxposright=t.hueh-(e.clientX-(n+6)),t.resetColor()}},stopDrag:function(){this.colorboxmousedown=!1,this.colorbarmousedown=!1},resetColor:function(){var e=this,t=parseInt(this.huepostop/e.hueh*360),o=100*(1-this.colorboxposright/e.hueh),i=100*(1-this.colorboxpostop/e.hueh),n=window.fromRGB(window.fromHSB({h:t,s:o,b:i}));e.colorhex=n,DEVICE.editStaticLEColor=n},setCurrentColor:function(e){this.colorhex=e,DEVICE.editStaticLEColor=e},triggerSelLeCode:function(){this.issellcode=!this.issellcode,DEVICE.isEditStaticLE=this.issellcode},alertInfo:function(e,t,o){this.$notify({title:e,type:t,duration:o,position:"bottom"})}}}},543:function(e,t,o){"use strict";var i,n=o(546),l=o.n(n),s=o(64),a=o.n(s),r=document.getElementById("mainbox").offsetHeight,c=document.getElementById("mainbox").offsetWidth;t.a={data:function(){return{mainh:r,mainw:c,offsettop:0,offsetleft:0,isshowkeyset:!0,showstdset:!1,device:window.DEVICE,ismutiselect:!1,hasfnx:!1,stdfnxval:"",mutiselect:{startpos:{x:0,y:0},endpos:{x:0,y:0},left:0,top:0,width:0,height:0,display:"none",ismousedown:!1},mutiselecttype:0,mutiselectkeys:[],quickselects:window.CMS.deviceConfig.QuickSelect,isfnlayer:!1}},props:["deviceid","scale","scaleplus","keymap","showbtn","isfnkeyset","isediting"],computed:{showkeymap:function(){var e=this.scale,t=[];this.offsetleft=this.scaleplus/2*1200,this.offsettop=this.scaleplus/2*600;for(var o=0;o<this.keymap.length;o++){var i=JSON.parse(a()(this.keymap[o]));i.Position.Top=this.keymap[o].Position.Top*e-this.offsettop,i.Position.Left=this.keymap[o].Position.Left*e-this.offsetleft,i.Position.Width=this.keymap[o].Position.Width*e,i.Position.Height=this.keymap[o].Position.Height*e,t.push(i)}return t},did:function(){return this.deviceid}},mounted:function(){},watch:{deviceid:function(e){this.deviceid=e,this.hasfnx=!1},"device.currentProfile.ModeIndex":function(e,t){var o=this,i=this;1==e?(this.showstdset=!0,this.$nextTick(function(){o.showStdBtns(),window.translateStdLelist(),window.readLE(DEVICE.currentProfile.DriverLE[0].GUID,function(e){e&&(LeData=e,i.playLe())}),$("std_conf_showbox").classList.add("key-breath"),setTimeout(function(){$("std_conf_showbox")&&$("std_conf_showbox").classList.remove("key-breath")},2e3)})):this.showstdset=!1},mutiselectkeys:function(e){console.log("selectkeys changed!"),console.log(a()(e),e.length);var t=this;t.$emit("selLeKeys",e,t.mutiselecttype)}},methods:(i={initKeyset:function(){var e=this,t="KeySet";e.isfnkeyset?(t="FnKeySet",e.isfnlayer=!0,DEVICE.currentProfile.KeySet.forEach(function(e,t){var o=document.getElementById("key"+e.Index);o&&(o.classList.remove("seted"),o.classList.remove("fnseted"),o.classList.remove("key-breath"),o.setAttribute("data-func",""),o.setAttribute("data-le",""),o.innerHTML="<span></span>")})):e.isfnlayer=!1,DEVICE.currentProfile[t].forEach(function(o,i){var n=document.getElementById("key"+o.Index);n&&(n.classList.remove("seted"),n.classList.remove("fnseted"),n.setAttribute("data-func",""),n.setAttribute("data-le",""),n.innerHTML="<span></span>",e.isfnkeyset&&n.classList.add("fnseted"),DEVICE.currentProfile[t][i].MenuName&&(n.children[0].classList.add("hasfunc"),n.classList.add("seted"),"0x0A010001"==DEVICE.currentProfile[t][i].DriverValue?(n.children[0].innerHTML=o.MenuName,n.setAttribute("data-func",o.MenuName)):(console.log(o.DriverValue),window.KeyFunc[o.DriverValue]?(window.KeyFunc[o.DriverValue].hasOwnProperty("Icon")&&n.children[0].classList.add(window.KeyFunc[o.DriverValue].Icon),window.KeyFunc[o.DriverValue].ShowClass&&n.children[0].classList.add(window.KeyFunc[o.DriverValue].ShowClass),n.setAttribute("data-func",e.$t("keys")[window.KeyFunc[o.DriverValue].LangTitle]),window.KeyFunc[o.DriverValue].Icon?n.children[0].innerHTML="":n.children[0].innerHTML=e.$t("keys")[window.KeyFunc[o.DriverValue].LangTitle]):(n.setAttribute("data-func",o.MenuName),o.MenuName.length<=5?n.children[0].innerHTML=o.MenuName:n.children[0].innerHTML=o.MenuName.substring(0,4)+"..."))),DEVICE.currentProfile.KeySet[i].KeyLE&&""!==DEVICE.currentProfile.KeySet[i].KeyLE.GUID&&(n.classList.add("seted"),n.setAttribute("data-le",DEVICE.currentProfile.KeySet[i].KeyLE.Name)))})},initStdKeyset:function(){var e=this;window.DefaultProfiles[0].KeySet.forEach(function(e,t){var o=$("key"+e.Index);o&&(o.classList.remove("seted"),o.setAttribute("data-func",""),o.setAttribute("data-le",""),o.innerHTML="<span></span>")}),CMS.deviceConfig.IsFnx&&(e.hasfnx=!0,DEVICE.currentProfile.hasOwnProperty("KeySet")&&(e.stdfnxval=e.device.currentProfile.KeySet[0].DriverValue.toString()))},changeFnx:function(e){var t=this;DEVICE.currentProfile.KeySet[0].DriverValue=e,t.$emit("fnxChange")},handleRemoveLight:function(){this.$emit("removeKeyLE")},handleRemoveFunc:function(){this.$emit("removeKeyFunc")},showStdBtns:function(){$("conf_showbox").style.setProperty("visibility","hidden","important");var e=$("std_conf_showbox"),t=CMS.deviceConfig.DriverLEKey,o=$("key"+t);o.offsetWidth,o.offsetLeft,o.offsetTop,e.offsetWidth,e.offsetHeight;e.style.setProperty("left","1rem","important"),e.style.setProperty("bottom","3rem","important")},showConfig:function(e){var t=$("conf_showbox");if(1!=DEVICE.currentProfile.ModeIndex){var o=$("key"+e),i={KeyFUNC:"",KeyLE:""};i.KeyFUNC=o.getAttribute("data-func"),i.KeyLE=o.getAttribute("data-le"),$("config_key").innerText=i.KeyFUNC?i.KeyFUNC:this.$t("common.key_func_no_config"),$("config_le")&&($("config_le").innerText=i.KeyLE?i.KeyLE:this.$t("common.key_le_no_config")),$("config_key").setAttribute("data-key",e);var n=o.offsetWidth,l=o.offsetLeft,s=o.offsetTop,a=t.offsetWidth,r=t.offsetHeight,c=l+n/2-a/2,d=s-r;t.style.setProperty("left",c+"px","important"),t.style.setProperty("top",d+"px","important"),t.style.setProperty("visibility","visible","important")}},hideConfig:function(){var e=$("conf_showbox");e&&e.style.setProperty("visibility","hidden","important")},handleKeyClick:function(e){var t=this;if(1==DEVICE.currentProfile.ModeIndex)return void t.alertInfo(t.$t("common.std_key_func_not_edit"),"warning",1e3);if(0===e)return void t.alertInfo(t.$t("common.fn_not_edit"),"warning",1e3);var o=!1,i=DEVICE.currentProfile.KeySet;t.isfnkeyset&&(i=DEVICE.currentProfile.FnKeySet);for(var n=0;n<i.length;n++)if(e==i[n].Index){o=!0;break}if(o){DEVICE.editKeyCode=e;var l=$("key"+e);l.classList.add("key-breath"),window.removeClass(window.siblings(l),"key-breath")}else t.alertInfo(t.$t("common.key_already_preset_func"),"warning",1e3)},handleSelectKeyLE:function(){this.$emit("showKeyLeSelect")},handleSelectStdLE:function(e){DEVICE.lestdindex=parseInt(e),this.$emit("selectStdLE")},handleRemoveStdLE:function(e){DEVICE.lestdindex=parseInt(e),this.$emit("removeStdLE")},renderFrame:function(e){for(var t=0;t<DEVICE.keymap.length;t++){var o=DEVICE.keymap[t].LocationCode;o=o.toString(),e[o]||$("le"+o)&&$("le"+o).style.setProperty("background","#000")}for(var i in e){var n=$("le"+i);n&&n.style.setProperty("background",window.toJS(e[i]))}},playLe:function(){var e=this,t=0,o=0,i=0,n=0;if(LeData.Canvases)for(var l=0;l<LeData.Canvases.length;l++)if(LeData.Canvases[l].DeviceTypes.indexOf(CMS.deviceConfig.DeviceType.toString())>=0){LeData=JSON.parse(a()(LeData.Canvases[l]));break}for(var s=0;s<LeData.Frames.length;s++)n+=LeData.Frames[s].Count;DEVICE.timer&&(clearInterval(DEVICE.timer),DEVICE.timer=null);var r=0;DEVICE.timer=setInterval(function(){++i==n&&(i=0);for(var l=JSON.parse(a()(LeData.LEConfigs)),s={},c=0;c<l.length;c++){switch(l[c].Color||(l[c].Color="0xffffff"),l[c].Type){case 0:l[c].Color=window.toJS(l[c].Color);break;case 1:var d=window.toHSB(l[c].Color);d.h=(d.h+r%l[c].Count*(360/l[c].Count))%360,l[c].Color=window.fromRGB(window.fromHSB(d));break;case 2:var d=window.toHSB(l[c].Color);d.b=d.b-r%(l[c].Count+l[c].StayCount)/(l[c].Count+l[c].StayCount)*100,l[c].Color=window.fromRGB(window.fromHSB(d))}for(var f in l[c].Keys)s[l[c].Keys[f]]=l[c].Color}var u={};for(var m in LeData.Frames[t].Data)s[m]?u[m]=s[m]:u[m]="0xffffff";LeData.Frames[t].Count>1?(o==LeData.Frames[t].Count-1&&(t++,o=0,t==LeData.Frames.length&&(t=0)),e.renderFrame(u),o++):(LeData.Frames[t].Data&&e.renderFrame(u),++t==LeData.Frames.length&&(t=0)),r++},100)},drag:function(e){var t=this;if(t.ismutiselect){var o=$("cms_header").offsetHeight;t.mutiselect.startpos.x=e.pageX,t.mutiselect.startpos.y=e.pageY,t.mutiselect.display="",t.mutiselect.left=e.pageX,t.mutiselect.top=e.pageY-o,t.mutiselect.ismousedown=!0,t.mutiselecttype=0,$("device").onmousemove=function(e){t.mutiselect.ismousedown&&(console.log("mouse move"),t.mutiselect.endpos.x=e.pageX,t.mutiselect.endpos.y=e.pageY,t.mutiselect.left=Math.min(e.pageX,t.mutiselect.startpos.x),t.mutiselect.top=Math.min(e.pageY-o,t.mutiselect.startpos.y-o),t.mutiselect.width=Math.abs(t.mutiselect.endpos.x-t.mutiselect.startpos.x),t.mutiselect.height=Math.abs(t.mutiselect.endpos.y-t.mutiselect.startpos.y))},document.onmouseup=function(){if(t.mutiselect.ismousedown){console.log("mouse up"),t.mutiselect.ismousedown=!1,t.mutiselect.display="none";for(var e=[],i=0;i<t.keymap.length;i++){var n=$("le"+t.keymap[i].LocationCode);n&&(t.mutiselect.width>0||t.mutiselect.height>0)?n.offsetLeft<Math.max(t.mutiselect.startpos.x,t.mutiselect.endpos.x)&&n.offsetLeft+n.offsetWidth>Math.min(t.mutiselect.startpos.x,t.mutiselect.endpos.x)&&n.offsetTop<Math.max(t.mutiselect.startpos.y-o,t.mutiselect.endpos.y-o)&&n.offsetTop+n.offsetHeight>Math.min(t.mutiselect.startpos.y-o,t.mutiselect.endpos.y-o)&&e.push(t.keymap[i].LocationCode):0!=t.mutiselect.width&&0!=t.mutiselect.height||t.mutiselect.startpos.x>=n.offsetLeft&&t.mutiselect.startpos.x<=n.offsetLeft+n.offsetWidth&&t.mutiselect.startpos.y-o>=n.offsetTop&&t.mutiselect.startpos.y-o<=n.offsetTop+n.offsetHeight&&e.push(t.keymap[i].LocationCode)}t.mutiselect.startpos.x=0,t.mutiselect.startpos.y=0,t.mutiselect.endpos.x=0,t.mutiselect.endpos.y=0,t.mutiselect.left=0,t.mutiselect.top=0,t.mutiselect.width=0,t.mutiselect.height=0,t.mutiselectkeys=e}}}},selectQuickKeys:function(e){console.log(e);var t=this,o=[];o="all"==e?window.getAllLocationCodes():"none"==e?[]:e,t.mutiselectkeys=o}},l()(i,"selectQuickKeys",function(e){console.log(e);var t=this,o=[];"all"==e?o=window.getAllLocationCodes():"none"==e?(o=[],t.$emit("selLeKeys",[])):o=e,t.mutiselecttype=1,t.mutiselectkeys=o}),l()(i,"switchFnLayer",function(){DEVICE.currentProfile.FnKeySet&&(this.isfnlayer=!this.isfnlayer,this.$emit("openFnLayer",this.isfnlayer))}),l()(i,"alertInfo",function(e,t,o){this.$notify({title:e,type:t,duration:o,position:"bottom-left"})}),i)}},544:function(e,t,o){"use strict";var i=o(64),n=o.n(i),l=o(109);t.a={data:function(){return{loading:!0,schfilter:"",lefilter:"",activeName:"1",filterlelist:[],leselname:"",isbreath:!1,disabled:!1,iseditloading:!1,newle:{Name:"",GUID:"",LeType:"simple"}}},props:["title","height","lelist","lesel","leseltype","isstaticle"],created:function(){},components:{"cms-lestatic":l.default},mounted:function(){var e=this;setTimeout(function(){e.filterlelist=e.lelist,e.loading=!1,e.$nextTick(function(){e.leSelected(e.lesel)})},1e3)},watch:{schfilter:function(e,t){var o=this;this.filterlelist=this.lelist.filter(function(t){return~t.Name.indexOf(e)}),this.$nextTick(function(){o.leSelected(o.lesel)})},lesel:function(e,t){e!==t&&this.leSelected(e)}},computed:{mode:function(){return DEVICE.currentProfile?DEVICE.currentProfile.ModeIndex:1},hasModeLe:function(){return!!CMS.deviceConfig.hasModeLe}},methods:{handleRowChange:function(e,t,o){var i=this;1==this.leseltype&&DEVICE.currentProfile.ModeLE.GUID!==e.GUID?((0==DEVICE.currentProfile.ModeIndex||this.hasModeLe&&[2,3,4].indexOf(this.mode)>=0)&&(DEVICE.currentProfile.ModeLE.GUID=e.GUID,DEVICE.currentProfile.ModeLE.Name=e.Name),this.leSelected(e.GUID)):2==this.leseltype&&(DEVICE.leeditsel=e.GUID),i.playLE(e.GUID)},handleSaveModeLE:function(){DEVICE.isEditStaticLE&&this.$refs.lestatic&&this.$refs.lestatic.triggerSelLeCode(),1==this.leseltype&&this.isbreath?this.$emit("saveModeLE"):2==this.leseltype&&console.log("灯效没有变更！")},leSelected:function(e){var t=this;if(this.hasModeLe||!([2,3,4].indexOf(DEVICE.currentProfile)>=0)||"1"!=this.leseltype){var o=this,i=o.filterlelist.length;DEVICE.isEditStaticLE&&o.$refs.lestatic&&o.$refs.lestatic.triggerSelLeCode(),e?(o.filterlelist.forEach(function(n,l){if(n.GUID===e){o.leselname=n.Name,o.$refs.lestable.setCurrentRow(n);var s=o.$refs.lestable.bodyWrapper.scrollHeight,a=l/i;1===DEVICE.currentProfile.ModeIndex?(o.$refs.lestable.bodyWrapper.scrollTop=s*a-80,o.isbreath=!1):e===window.cprofile.ModeLE.GUID?(o.$refs.lestable.bodyWrapper.scrollTop=s*a-80,o.isbreath=!1):(0===DEVICE.currentProfile.ModeIndex||t.hasModeLe&&[2,3,4].indexOf(t.mode)>=0)&&(o.isbreath=!0)}}),o.playLE(e)):o.leUnSelectAll()}},leUnSelectAll:function(){this.$refs.lestable.setCurrentRow()},playLE:function(e){var t=this;window.readLE(e,function(e){DEVICE.timer&&(clearInterval(DEVICE.timer),DEVICE.timer=null),window.LeData=e,t.$emit("playLE")})},editLe:function(){this.$emit("editLE")},addLe:function(){var e=this;if(e.newle.Name||(e.newle.Name=e.$t("le.le_name")+(CMS.les.length+1)),e.isLeExist(e.newle.Name))return void e.alertInfo(e.$t("le.le_already_exist"),"warning",800);e.newle.GUID=window.getGuid(),CMS.deviceConfig.LeCate?e.newle.LeCate=CMS.deviceConfig.LeCate:delete e.newle.LeCate;var t=JSON.parse(n()(e.newle));t.Frames=[{Count:1,Name:"frame0",Data:{}}],t.LEConfigs=[{Type:0,Count:1,Color:"0xff0000",Keys:[]}],window.writeLE(t.GUID,t,function(o){delete t.Frames,delete t.LEConfigs,CMS.les.push(t),window.writeLEList(CMS.les,function(){e.alertInfo(e.$t("le.le_create_success"),"success",500),e.$nextTick(function(){e.$refs.lestable.bodyWrapper.scrollTop=e.$refs.lestable.bodyWrapper.scrollHeight,e.leSelected(t.GUID)})})})},copyLe:function(){console.log("copyLe");var e=this,t=JSON.parse(n()(LeData));if(t.Name=t.Name+"_"+CMS.les.length,t.GUID=window.getGuid(),e.isLeExist(t.Name))return void e.alertInfo(e.$t("le.le_already_exist"),"warning",800);window.writeLE(t.GUID,t,function(o){delete t.Frames,delete t.LEConfigs,CMS.les.push(t),window.writeLEList(CMS.les,function(){e.alertInfo(e.$t("le.le_copy_success"),"success",500),e.$nextTick(function(){e.$refs.lestable.bodyWrapper.scrollTop=e.$refs.lestable.bodyWrapper.scrollHeight,e.leSelected(t.GUID)})})})},deleteLe:function(){console.log("deleteLe");var e=this;e.$confirm(e.$t("le.le_confirm_delete"),e.$t("common.attention"),{confirmButtonText:e.$t("common.confirm"),cancelButtonText:e.$t("common.cancel"),type:"warning"}).then(function(){var t=LeData.GUID;window.deleteLE(t,function(){for(var o=0;o<CMS.les.length;o++)if(CMS.les[o].GUID==t){CMS.les.splice(o,1);break}window.writeLEList(CMS.les,function(){e.alertInfo(e.$t("le.le_delete_success"),"success",800)})})}).catch(function(){e.alertInfo(e.$t("le.le_delete_cancelled"),"info",800)})},importLe:function(){var e=this;window.importLE(function(t){for(var o=JSON.parse(t),i=!0,n=0;n<CMS.les.length;n++)CMS.les[n].GUID===o.GUID&&(i=!1,o.Name=CMS.les[n].Name,e.$confirm(e.$t("le.le_aready_exist_confirm_overwrite"),e.$t("common.attention"),{confirmButtonText:e.$t("common.confirm"),cancelButtonText:e.$t("common.cancel"),type:"warning"}).then(function(){window.writeLE(o.GUID,o,function(t){e.alertInfo(e.$t("le.le_import_success"),"success",500)})}).catch(function(){e.alertInfo(e.$t("le.le_import_cancelled"),"success",500)}));i&&window.writeLE(o.GUID,o,function(t){delete o.Frames,delete o.LEConfigs,delete o.Canvases,CMS.les.push(o),window.writeLEList(CMS.les,function(){e.alertInfo(e.$t("le.le_import_success"),"success",500)})})})},exportLe:function(){var e=this;window.exportLE(LeData,function(t){e.alertInfo(e.$t("le.le_export_success"),"success",500)})},isLeExist:function(e){for(var t=0;t<CMS.les.length;t++)if(CMS.les[t].Name==e)return!0;return!1},reNameLE:function(){console.log("rename le")},alertInfo:function(e,t,o){this.$notify({title:e,type:t,duration:o,position:"bottom-left"})},disableLE:function(){this.isbreath=!1,DEVICE.isEditStaticLE&&this.$refs.lestatic&&this.$refs.lestatic.triggerSelLeCode()}}}},545:function(e,t,o){e.exports={default:o(547),__esModule:!0}},546:function(e,t,o){"use strict";t.__esModule=!0;var i=o(545),n=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(e,t,o){return t in e?(0,n.default)(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}},547:function(e,t,o){o(548);var i=o(5).Object;e.exports=function(e,t,o){return i.defineProperty(e,t,o)}},548:function(e,t,o){var i=o(16);i(i.S+i.F*!o(8),"Object",{defineProperty:o(11).f})},549:function(e,t,o){t=e.exports=o(10)(void 0),t.push([e.i,".colorpicker,.predefine{height:32px;line-height:32px}.predefine,.predefine ul li{display:inline-block}.predefine ul li{float:left;width:24px;height:24px;background:blue;list-style:none;margin-left:.8rem}.color-picker{position:relative;z-index:10;padding:6px;box-sizing:content-box;background-color:#3a3939;border-radius:4px;box-shadow:0 2px 12px 0 rgba(0,0,0,.1);display:-ms-flexbox;display:flex;width:100%;box-sizing:border-box}.color-select{-ms-flex:3;flex:3}.color-preset{-ms-flex:2;flex:2;position:relative}.color-current{width:80%;padding-top:80%;float:left;background:red;position:relative}.color-black,.color-white{position:absolute;top:0;left:0;right:0;bottom:0}.color-white{background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.color-black{background:linear-gradient(0deg,#000,hsla(0,0%,100%,0))}.color-dot{position:absolute;right:0;top:0;width:4px;height:4px;border:1px solid #fff;margin:-3px;border-radius:2px;cursor:crosshair}.color-bar{float:right;position:relative;width:14%;margin-right:3%;padding-top:80%;background:linear-gradient(180deg,red 0,#ff0 16.7%,#0f0 33.4%,#0ff 50.1%,#00f 66.8%,#f0f 83.4%,red)}.color-bar-pos{position:absolute;cursor:pointer;box-sizing:border-box;left:0;top:100px;width:100%;height:4px;border-radius:1px;background:#fff;border:1px solid #f0f0f0;box-shadow:0 0 2px rgba(0,0,0,.6);z-index:1;margin-top:-2px;margin-bottom:-2px}.color-sets{display:-ms-flexbox;display:flex;width:100%;margin-block-start:0;margin-block-end:0;margin-inline-start:0;margin-inline-end:0;padding-inline-start:0;-webkit-margin-before:0;-webkit-margin-after:0;-webkit-margin-start:0;-webkit-margin-end:0;-webkit-padding-start:0;box-sizing:content-box;display:-webkit-flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap}.color-sets li{margin:0 0 2%;padding:0;float:left;width:15%;min-width:15%;max-width:15%;padding-bottom:15%;border:1px solid #ccc;background:#00c2ff;list-style:none;display:inline-block;-ms-flex:1;flex:1;border-radius:10%;box-sizing:border-box;cursor:pointer}.color-sets li.selected{box-shadow:0 0 3px 2px #409eff}.color-val{clear:both;position:absolute;bottom:0;width:100%;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.color-val,.color-val input{height:1.8rem;line-height:1.8rem;text-align:center}.color-val input{-ms-flex:5;flex:5;border:none;box-sizing:border-box}.color-val i{-ms-flex:2;flex:2}.color-state-btn{-ms-flex:3;flex:3;height:1.8rem;line-height:1.8rem;border-radius:.2rem;background-color:#333;border:1px solid #000;display:inline-block;color:red;cursor:pointer}.color-state-btn i{height:1.8rem;line-height:1.8rem;font-size:1.2rem}.color-state-btn.active{border-color:#00c2ff}.color-state-btn.active i{font-size:1.3rem;font-weight:700;color:#0f0}",""])},550:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"colorpbox",staticClass:"color-picker",attrs:{id:"colorpbox"}},[o("div",{staticClass:"color-select",on:{mouseup:e.stopDrag}},[o("div",{staticClass:"color-current",on:{mousedown:function(t){return e.setColorBoxPos(t)},mousemove:function(t){return e.moveColorBoxPos(t)}}},[o("div",{staticClass:"color-white"}),e._v(" "),o("div",{staticClass:"color-black"}),e._v(" "),o("div",{staticClass:"color-dot",style:{top:e.colorboxpostop+"px",right:e.colorboxposright+"px"}})]),e._v(" "),o("div",{staticClass:"color-bar",on:{mousedown:function(t){return e.setHuePos(t)},mousemove:function(t){return e.moveHuePos(t)}}},[o("div",{staticClass:"color-bar-pos",style:{top:e.huepostop+"px"}})])]),e._v(" "),o("div",{staticClass:"color-preset"},[o("ul",{staticClass:"color-sets"},e._l(e.precolors,function(t,i){return o("li",{key:i,class:{selected:e.colorhex==t},style:{backgroundColor:t},on:{click:function(o){return e.setCurrentColor(t)}}})}),0),e._v(" "),o("div",{staticClass:"color-val"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.colorhex,expression:"colorhex"}],style:{backgroundColor:e.colorhex},attrs:{type:""},domProps:{value:e.colorhex},on:{input:function(t){t.target.composing||(e.colorhex=t.target.value)}}}),e._v(" "),o("i",{staticClass:"el-icon-back",staticStyle:{color:"green"}}),e._v(" "),o("div",{staticClass:"color-state-btn",class:{active:e.issellcode},on:{click:e.triggerSelLeCode}},[o("i",{staticClass:"el-icon-kb-select"})])])]),e._v(" "),e._e()])},n=[],l={render:i,staticRenderFns:n};t.a=l},551:function(e,t,o){var i=o(549);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);o(18)("4e1ffed3",i,!0,{})},552:function(e,t,o){t=e.exports=o(10)(void 0),t.push([e.i,".device{width:100%;height:100%;position:relative;z-index:2}.device .device-panel{position:absolute;z-index:0}.device .device-keycap{position:absolute;z-index:1}.device .device-outline{position:absolute;z-index:-1;-webkit-animation-timing-function:ease-in-out;-webkit-animation-name:device-outline;-webkit-animation-duration:1s;-webkit-animation-iteration-count:infinite;-webkit-animation-direction:alternate}.device-fn{position:absolute;z-index:11;cursor:pointer}.device-fn.active{border:2px solid red;border-radius:.4rem;box-shadow:inset 0 0 10px 10px rgba(0,194,255,.6)}@keyframes device-outline{0%{-webkit-filter:opacity(.2);transfrom:scale(.4)}to{-webkit-filter:opacity(1);transfrom:scale(1.2)}}.device-light{position:absolute;background-color:red;z-index:-1}.device-key{position:absolute;text-align:center;text-overflow:hidden;display:table;z-index:10;box-sizing:border-box}.device-key.noshowkeyset span{display:none}.device-key.seted{border-bottom:.3rem solid #00c2ff}.device-key span{display:table-cell;vertical-align:middle;text-align:center;width:100%;height:100%;z-index:12;cursor:pointer}.device-key span.hasfunc{color:#fff;background-color:hsla(0,0%,8%,.6)}.key-breath{border:1px solid #2b92d4;border-radius:2px;color:#fff;text-align:center;cursor:pointer;box-shadow:0 1px 2px rgba(0,0,0,.3);overflow:hidden;-webkit-animation-timing-function:ease-in-out;-webkit-animation-name:keybreathe;-webkit-animation-duration:.3s;-webkit-animation-iteration-count:infinite;-webkit-animation-direction:alternate}.custom.el-tooltip__popper{border:1px solid #00c2ff}.custom.el-tooltip__popper .popper__arrow{border-width:6px;bottom:-6px;left:calc(50% - 6px);margin-right:3px;border-bottom-width:0;border-top-color:#00c2ff}.custom.el-tooltip__popper .popper__arrow:after{bottom:1px;margin-left:-6px;border-top-color:#303133;border-bottom-width:0}.key-func{color:gray}.key-func tr td{padding:.1rem}.key-func tr td.cval{color:#eee}.key-func tr td i{color:red;font-size:1.2rem;cursor:pointer}.key-func tr td i.warning{color:#ff0}.dis-edit{color:red}#conf_showbox{position:absolute;display:block}#std_conf_showbox td{border:1px solid #00778a;padding:.2rem .3rem}.device-multiselect{position:absolute;z-index:2;border:2px dotted #0af;filter:alpha(opacity=50)}#quick_sel{position:absolute;text-align:center;z-index:2}",""])},553:function(e,t,o){t=e.exports=o(10)(void 0),t.push([e.i,".el-input-group__prepend{width:3rem}.tb-lelist i{font-size:1.2rem;color:#888}",""])},554:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"device",attrs:{id:"device"},on:{mousedown:function(t){return e.drag(t)}}},[o("img",{staticClass:"device-panel",style:{width:1200*e.scale+"px",height:600*e.scale+"px",left:-e.offsetleft+"px",top:-e.offsettop+"px"},attrs:{src:e.APPCFG.devices[e.did].img_panel,draggable:"false"}}),e._v(" "),o("img",{staticClass:"device-keycap",style:{width:1200*e.scale+"px",height:600*e.scale+"px",left:-e.offsetleft+"px",top:-e.offsettop+"px"},attrs:{src:e.APPCFG.devices[e.did].img_keycap,draggable:"false"},on:{mouseout:e.hideConfig}}),e._v(" "),o("img",{staticClass:"device-outline",style:{width:1200*e.scale+"px",height:600*e.scale+"px",left:-e.offsetleft+"px",top:-e.offsettop+"px"},attrs:{src:e.APPCFG.devices[e.did].img_outline,draggable:"false"}}),e._v(" "),e._l(e.showkeymap,function(e){return o("div",{staticClass:"device-light",style:{left:e.Position.Left+"px",top:e.Position.Top+"px",width:e.Position.Width+"px",height:e.Position.Height+"px",transform:"rotate("+e.Position.Rotate+"deg)"},attrs:{id:"le"+e.LocationCode}})}),e._v(" "),e._l(e.showkeymap,function(t){return 0==t.LogicCode?o("div",{staticClass:"device-fn",class:{active:e.isfnlayer},style:{left:t.Position.Left+"px",top:t.Position.Top+"px",width:t.Position.Width+"px",height:t.Position.Height+"px",transform:"rotate("+t.Position.Rotate+"deg)"},on:{click:e.switchFnLayer}}):e._e()}),e._v(" "),o("div",{staticClass:"keybox"},e._l(e.showkeymap,function(t){return e.showbtn&&t.LogicCode>0?o("div",{staticClass:"device-key",class:{noshowkeyset:!e.isshowkeyset},style:{left:t.Position.Left+"px",top:t.Position.Top+"px",width:t.Position.Width+"px",height:t.Position.Height+"px",transform:"rotate("+t.Position.Rotate+"deg)"},attrs:{id:"key"+t.LogicCode,"data-logic":t.LogicCode},on:{mouseover:function(o){return e.showConfig(t.LogicCode)},click:function(o){return e.handleKeyClick(t.LogicCode)}}}):e._e()}),0),e._v(" "),o("div",{staticClass:"device-multiselect",style:{left:e.mutiselect.left+"px",top:e.mutiselect.top+"px",width:e.mutiselect.width+"px",height:e.mutiselect.height+"px",display:e.mutiselect.display}}),e._v(" "),e.showbtn?o("div",{staticClass:"custom el-tooltip__popper is-dark",staticStyle:{visibility:"hidden"},attrs:{id:"conf_showbox"}},[o("div",[o("table",{staticClass:"key-func"},[o("tr",[o("td",[e._v(e._s(e.$t("common.key_func"))+" :")]),e._v(" "),o("td",{staticClass:"cval",attrs:{id:"config_key",colspan:"2"}},[e._v(e._s(e.$t("common.key_func_no_config")))]),e._v(" "),o("td",[o("i",{staticClass:"el-icon-delete",on:{click:e.handleRemoveFunc}})])]),e._v(" "),e.isfnkeyset?e._e():o("tr",[o("td",[e._v(e._s(e.$t("common.key_light"))+" :")]),e._v(" "),o("td",{staticClass:"cval",attrs:{id:"config_le"}},[e._v(e._s(e.$t("common.key_le_no_config")))]),e._v(" "),o("td",[o("i",{staticClass:"el-icon-more-outline warning",on:{click:e.handleSelectKeyLE}})]),e._v(" "),o("td",[o("i",{staticClass:"el-icon-delete",on:{click:e.handleRemoveLight}})])])])]),e._v(" "),o("div",{staticClass:"popper__arrow"})]):e._e(),e._v(" "),e.showstdset?o("div",{staticClass:"custom el-tooltip__popper is-dark",staticStyle:{padding:"6px"},attrs:{id:"std_conf_showbox"}},[o("div",[o("table",{staticClass:"key-func"},[o("tr",{staticStyle:{height:"1.8rem","line-height":"1.8rem"}},[o("th",[e._v(e._s(e.$t("common.light_effect"))+":")]),e._v(" "),e._l(e.device.currentProfile.DriverLE,function(t,i){return o("td",{key:i,staticClass:"cval"},[o("span",{attrs:{id:"std_le_"+i}},[e._v(e._s(t.GUID?t.Name:e.$t("common.key_le_no_config")))]),e._v(" "),o("i",{staticClass:"el-icon-more-outline warning",on:{click:function(t){return e.handleSelectStdLE(i)}}}),e._v(" "),o("i",{staticClass:"el-icon-delete error",on:{click:function(t){return e.handleRemoveStdLE(i)}}})])})],2),e._v(" "),e.hasfnx?o("tr",[o("th",{staticStyle:{"text-align":"right"}},[e._v("Fnx:")]),e._v(" "),o("td",{staticStyle:{border:"none","text-align":"left"},attrs:{colspan:"5"}},[o("el-radio-group",{attrs:{size:"mini"},on:{change:e.changeFnx},model:{value:e.stdfnxval,callback:function(t){e.stdfnxval=t},expression:"stdfnxval"}},[o("el-radio-button",{attrs:{label:"0x0a070002"}},[e._v(e._s(e.$t("keys.key_mode_offline_1")))]),e._v(" "),o("el-radio-button",{attrs:{label:"0x0a070003"}},[e._v(e._s(e.$t("keys.key_mode_offline_2")))]),e._v(" "),o("el-radio-button",{attrs:{label:"0x0a070004"}},[e._v(e._s(e.$t("keys.key_mode_offline_3")))])],1)],1)]):e._e()])]),e._v(" "),o("div",{staticClass:"popper__arrow",staticStyle:{left:"2rem"}})]):e._e(),e._v(" "),e.isediting?o("div",{style:{bottom:.4*e.mainh+"px",width:.76*e.mainw+"px"},attrs:{id:"quick_sel"}},[o("el-row",[o("el-col",{attrs:{span:24}},[e._l(e.quickselects,function(t,i){return o("el-button",{key:i,attrs:{size:"mini"},on:{click:function(o){return e.selectQuickKeys(t.lcodes)}},nativeOn:{mouseenter:function(t){e.ismutiselect=!1},mouseleave:function(t){e.ismutiselect=!0}}},[e._v(e._s(e.$t("common")[t.lang]))])}),e._v(" "),o("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.selectQuickKeys("all")}},nativeOn:{mouseenter:function(t){e.ismutiselect=!1},mouseleave:function(t){e.ismutiselect=!0}}},[e._v(e._s(e.$t("common.line_all")))]),e._v(" "),o("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.selectQuickKeys("none")}},nativeOn:{mouseenter:function(t){e.ismutiselect=!1},mouseleave:function(t){e.ismutiselect=!0}}},[e._v(e._s(e.$t("common.line_none")))])],2)],1)],1):e._e()],2)},n=[],l={render:i,staticRenderFns:n};t.a=l},555:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{staticStyle:{"z-index":"4"}},[o("el-col",{staticStyle:{padding:".5rem"},attrs:{span:24}},[o("el-card",{staticStyle:{position:"relative"},attrs:{accordion:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("div",{staticClass:"disablediv",class:{disablehide:0==e.mode||e.hasModeLe&&[2,3,4].indexOf(e.mode)>=0||"2"==e.leseltype}}),e._v(" "),o("template",{slot:"header"},[o("i",{staticClass:"header-icon el-icon-kb-light3"}),e._v("  "+e._s(e.title)+" ( "),o("el-tag",[e._v(e._s(e.lelist.length))]),e._v(" )\n      ")],1),e._v(" "),e.isstaticle?o("div",{staticStyle:{width:"100%"},attrs:{id:"staticlebox"}},[o("cms-lestatic",{ref:"lestatic"})],1):e._e(),e._v(" "),o("el-input",{staticClass:"input-with-select",attrs:{placeholder:e.$t("common.input_search_text"),size:"mini"},model:{value:e.schfilter,callback:function(t){e.schfilter=t},expression:"schfilter"}},[o("template",{slot:"prepend"},[e._v(e._s(e.$t("menu.menu_le_lib")))]),e._v(" "),o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],2),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"lestable",staticClass:"tb-lelist",attrs:{data:e.filterlelist,"show-header":!1,border:"",height:e.height,size:"mini","highlight-current-row":"",setCurrentRow:e.leSelected,"row-dblclick":e.reNameLE,"empty-text":e.$t("common.no_data")},on:{"row-click":e.handleRowChange}},[o("el-table-column",{attrs:{"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return["combination"==t.row.LeType?o("i",{staticClass:"el-icon-kb-cate1"}):80==t.row.LeCate?o("i",{staticClass:"el-icon-kb-mouse-left"}):1760==t.row.LeCate?o("i",{staticClass:"el-icon-kb-system"}):o("i",{staticClass:"el-icon-kb-light1"}),e._v(" "),o("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.Name))])]}}])})],1),e._v(" "),1==e.leseltype?o("div",{staticClass:"list-oper"},[o("el-tag",{staticStyle:{flex:"7",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},attrs:{size:"small",type:"success"}},[e._v(e._s(e.leselname||e.$t("common.unset")))]),e._v(" "),o("i",{staticClass:"el-icon-back",staticStyle:{color:"green",flex:"1",margin:"auto"}}),e._v(" "),o("el-button",{class:{"btn-breath":e.isbreath},staticStyle:{flex:"2"},attrs:{icon:"el-icon-view",loading:!1},on:{click:e.handleSaveModeLE}},[e._v(e._s(e.$t("common.use")))]),e._v(" "),e._e()],1):2==e.leseltype?o("div",{staticStyle:{padding:".2rem .3rem .3rem"}},[o("el-button-group",{staticStyle:{display:"flex"}},[o("el-button",{staticStyle:{flex:"1"},attrs:{icon:"el-icon-edit",loading:e.iseditloading},on:{click:e.editLe}}),e._v(" "),o("el-popover",{attrs:{placement:"left",trigger:"click"}},[o("el-form",{staticClass:"pop-form",attrs:{inline:!0}},[o("el-form-item",[o("el-input",{model:{value:e.newle.Name,callback:function(t){e.$set(e.newle,"Name",t)},expression:"newle.Name"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.addLe}},[e._v(e._s(e.$t("common.create")))])],1)],1),e._v(" "),o("el-button",{staticStyle:{flex:"1"},attrs:{slot:"reference",icon:"el-icon-plus"},slot:"reference"})],1),e._v(" "),o("el-button",{staticStyle:{flex:"1"},attrs:{icon:"el-icon-kb-copy"},on:{click:e.copyLe}}),e._v(" "),o("el-button",{staticStyle:{flex:"1"},attrs:{icon:"el-icon-delete",type:"danger"},on:{click:e.deleteLe}}),e._v(" "),o("el-button",{staticStyle:{flex:"1"},attrs:{icon:"el-icon-upload2"},on:{click:e.importLe}}),e._v(" "),o("el-button",{staticStyle:{flex:"1"},attrs:{icon:"el-icon-download"},on:{click:e.exportLe}})],1)],1):e._e()],2)],1)],1)},n=[],l={render:i,staticRenderFns:n};t.a=l},556:function(e,t,o){var i=o(552);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);o(18)("64ff2c8c",i,!0,{})},557:function(e,t,o){var i=o(553);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);o(18)("542aff16",i,!0,{})},576:function(e,t,o){"use strict";var i=o(64),n=o.n(i),l=o(110),s=o(111),a=o(65),r=(o.n(a),document.getElementById("mainbox").offsetHeight),c=document.getElementById("mainbox").offsetWidth;t.a={data:function(){return{mainh:r,mainw:c,layer:"layer1",layeroper:"",isshowbtn:!1,disableleediter:!0,colors:"#f00",lesel:DEVICE.leeditsel,leeditdata:{Name:"",GUID:"",Frames:[],LEConfigs:[]},leframesel:0,leconfigsel:-1,editleframetype:0,les:{lelist:window.CMS.les},device:{deviceid:window.CMS.deviceID,keymap:DEVICE.keymap,scale:c/24*18/1200},color:"green",iseditloading:!1,loadingframe:!1,loadingleconfig:!1,isediting:!1}},mounted:function(){var e=this;window.onresize=function(){return function(){e.mainh=document.getElementById("mainbox").offsetHeight,e.mainw=document.getElementById("mainbox").offsetWidth}()},e.$refs.device.offsetleft=CMS.deviceConfig.ShowOffsetLeft?CMS.deviceConfig.ShowOffsetLeft:"0px",e.$refs.device.offsettop=CMS.deviceConfig.ShowOffsetTop?CMS.deviceConfig.ShowOffsetTop:"0px",setTimeout(function(){DEVICE.lesel?e.$refs.les.leSelected(DEVICE.lesel):e.$refs.les.leSelected(CMS.les[CMS.les.length-1].GUID)},2e3)},watch:{mainh:function(e){this.mainh=e},mainw:function(e){this.mainw=e},leeditdata:function(e){},color:function(e,t){var o=this;e!=t&&o.leeditdata.LEConfigs[o.leconfigsel]&&(o.leeditdata.LEConfigs[o.leconfigsel].Color="string"==typeof e?e.replace("#","0x"):e.hex.toString().replace("#","0x"),o.renderLEConfig(o.leeditdata.LEConfigs[o.leconfigsel]))}},components:{"cms-device":l.default,"cms-lelist":s.default,"cms-color":a.Sketch},computed:{lay_show_scale:function(){return CMS.deviceConfig.hasOwnProperty("ShowScalePlus")?.76*this.mainw/1200+CMS.deviceConfig.ShowScalePlus:.76*this.mainw/1200},lay_show_scale_plus:function(){return CMS.deviceConfig.hasOwnProperty("ShowScalePlus")?CMS.deviceConfig.ShowScalePlus:0},lay_show_h:function(){return 1*this.mainh},lay_lelist_w:function(){return.24*this.mainw},lay_lelist_h:function(){return 1*this.mainh-48-84+4},lay_le_edit_w:function(){return.76*this.mainw},lay_le_edit_h:function(){return.38*this.mainh},lay_le_edit_color_w:function(){return this.lay_le_edit_w/4-20}},methods:{selLeKeys:function(e,t){var o=this;if(console.log(123,t),0==o.editleframetype){if(0==e.length)1==t&&(o.leeditdata.Frames[o.leframesel].Data={});else for(var i=0;i<e.length;i++)o.leeditdata.Frames[o.leframesel].Data[e[i]]?0==t&&delete o.leeditdata.Frames[o.leframesel].Data[e[i]]:o.leeditdata.Frames[o.leframesel].Data[e[i]]="0xffffff";o.renderFrame(o.leeditdata.Frames[o.leframesel].Data)}else{if(0==e.length)1==t&&(o.leeditdata.LEConfigs[o.leconfigsel].Keys=[]);else for(var i=0;i<e.length;i++){var n=o.leeditdata.LEConfigs[o.leconfigsel].Keys.indexOf(e[i]);n>=0?0==t&&o.leeditdata.LEConfigs[o.leconfigsel].Keys.splice(n,1):o.leeditdata.LEConfigs[o.leconfigsel].Keys.push(e[i])}o.renderLEConfig(o.leeditdata.LEConfigs[o.leconfigsel])}},colorChange:function(e){console.log(e)},rowClassName:function(e){var t=e.row,o=e.rowIndex;t.index=o},handleFrameChange:function(e,t,o){console.log("frame data");var i=this;i.editleframetype=0,i.stopLe(),i.leframesel=e.index,i.renderFrame(e.Data),console.log(e.Data)},renderFrame:function(e){for(var t=0;t<DEVICE.keymap.length;t++){var o=DEVICE.keymap[t].LocationCode;o=o.toString(),e[o]||$("le"+o)&&$("le"+o).style.setProperty("background","#000")}for(var i in e){var n=$("le"+i);n&&n.style.setProperty("background",window.toJS(e[i]))}},handleLEConfigChange:function(e,t,o){var i=this;i.editleframetype=1,i.stopLe(),i.leconfigsel=e.index,i.color=e.Color.toString().replace("0x","#"),i.renderLEConfig(e),console.log(e.Color)},renderLEConfig:function(e){for(var t=0;t<DEVICE.keymap.length;t++){var o=DEVICE.keymap[t].LocationCode;o=o.toString(),$("le"+o)&&$("le"+o).style.setProperty("background","#000")}for(var i=0;i<e.Keys.length;i++){var n=e.Keys[i],l=$("le"+n);l&&l.style.setProperty("background",e.Color.replace("0x","#"))}},initLeData:function(){},prePlayLE:function(){LeData=JSON.parse(n()(this.leeditdata)),this.playLE()},playLE:function(){this.$refs.device.playLe()},stopLe:function(){DEVICE.timer&&(clearInterval(DEVICE.timer),DEVICE.timer=null);for(var e=0;e<DEVICE.keymap.length;e++){var t=DEVICE.keymap[e].LocationCode.toString();$("le"+t)&&$("le"+t).style.setProperty("background","#000")}},editLE:function(){var e=this;e.stopLe(),e.$refs.les.iseditloading=!0,e.disableleediter=!1,e.loadingframe=!0,e.loadingleconfig=!0,e.$refs.device.ismutiselect=!0,setTimeout(function(){var t=JSON.parse(n()(LeData));e.leeditdata=t,e.$nextTick(function(){e.loadingframe=!1,e.loadingleconfig=!1,e.isediting=!0,e.$refs.les.iseditloading=!1})},500)},addFrame:function(){var e=this;console.log("addFrame");var t=this,o={Name:"",Count:1,Data:{}};o.Name="frame"+t.leeditdata.Frames.length,t.leeditdata.Frames.push(o),this.$nextTick(function(){e.$refs.tb_frame.bodyWrapper.scrollTop=e.$refs.tb_frame.bodyWrapper.scrollHeight,e.$refs.tb_frame.setCurrentRow(t.leeditdata.Frames[t.leeditdata.Frames.length-1]),e.leframesel=t.leeditdata.Frames.length-1})},copyFrame:function(){var e=this;console.log("copyFrame");var t=this,o=t.leframesel;if(o<0)return void t.alertInfo(t.$t("le.no_leframe_select"),"warning",1e3);var i=JSON.parse(n()(t.leeditdata.Frames[o]));i.Name="frame"+t.leeditdata.Frames.length,t.leeditdata.Frames.push(i),t.$nextTick(function(){t.$refs.tb_frame.bodyWrapper.scrollTop=t.$refs.tb_frame.bodyWrapper.scrollHeight,t.$refs.tb_frame.setCurrentRow(t.leeditdata.Frames[t.leeditdata.Frames.length-1]),e.leframesel=t.leeditdata.Frames.length-1})},deleteFrame:function(){console.log("deleteFrame");var e=this,t=e.leframesel;if(e.leeditdata.Frames.length>1&&e.leeditdata.Frames.length-1==t&&(e.leframesel=e.leeditdata.Frames.length-2),1==e.leeditdata.Frames.length)return e.leframesel=0,e.$refs.tb_frame.setCurrentRow(e.leeditdata.Frames[0]),void e.alertInfo(e.$t("le.leframe_must_keep_at_least_one"),"warning",1e3);e.leframesel>=0&&e.leeditdata.Frames.splice(t,1),e.$nextTick(function(){e.leframesel>=0?e.$refs.tb_frame.setCurrentRow(e.leeditdata.Frames[e.leframesel]):e.alertInfo(e.$t("le.no_leframe_select"),"warning",1e3)})},moveUpFrame:function(){var e=this;console.log("moveUpFrame");var t=this,o=t.leframesel;if(o>0){var i=JSON.parse(n()(t.leeditdata.Frames[o])),l=JSON.parse(n()(t.leeditdata.Frames[o-1]));t.leeditdata.Frames[o-1].Name=i.Name,t.leeditdata.Frames[o-1].Count=i.Count,t.leeditdata.Frames[o-1].Data=i.Data,t.leeditdata.Frames[o].Name=l.Name,t.leeditdata.Frames[o].Count=l.Count,t.leeditdata.Frames[o].Data=l.Data,t.$nextTick(function(){t.leframesel=t.leframesel-1,t.$refs.tb_frame.setCurrentRow(t.leeditdata.Frames[o-1]),t.$refs.tb_frame.bodyWrapper.scrollTop=e.$refs.tb_frame.bodyWrapper.scrollHeight*((o-3)/t.leeditdata.Frames.length)})}else t.alertInfo(t.$t("le.leframe_moved_top"),"warning",1e3)},moveDownFrame:function(){var e=this;console.log("moveDownFrame");var t=this,o=t.leframesel;if(o<t.leeditdata.Frames.length-1){var i=JSON.parse(n()(t.leeditdata.Frames[o])),l=JSON.parse(n()(t.leeditdata.Frames[o+1]));t.leeditdata.Frames[o+1].Name=i.Name,t.leeditdata.Frames[o+1].Count=i.Count,t.leeditdata.Frames[o+1].Data=i.Data,t.leeditdata.Frames[o].Name=l.Name,t.leeditdata.Frames[o].Count=l.Count,t.leeditdata.Frames[o].Data=l.Data,t.$nextTick(function(){t.leframesel=t.leframesel+1,t.$refs.tb_frame.setCurrentRow(t.leeditdata.Frames[o+1]),console.log(o/t.leeditdata.Frames.length),t.$refs.tb_frame.bodyWrapper.scrollTop=e.$refs.tb_frame.bodyWrapper.scrollHeight*((o-1)/t.leeditdata.Frames.length)})}else t.alertInfo(t.$t("le.leframe_moved_bottom"),"warning",1e3)},saveLeEdit:function(){console.log("saveLeEdit");for(var e=this,t=0;t<e.leeditdata.Frames.length;t++)e.leeditdata.Frames[t].hasOwnProperty("index")&&delete e.leeditdata.Frames[t].index;for(var t=0;t<e.leeditdata.LEConfigs.length;t++)e.leeditdata.LEConfigs[t].hasOwnProperty("index")&&delete e.leeditdata.LEConfigs[t].index;console.log(n()(this.leeditdata)),window.writeLE(e.leeditdata.GUID,e.leeditdata,function(t){e.alertInfo(e.$t("le.le_edit_save_success"),"success",1e3),e.isediting=!1,e.cancelLeEdit()})},cancelLeEdit:function(){console.log("cancelLeEdit");var e=this;e.$refs.device.ismutiselect=!1,e.disableleediter=!0,e.leeditdata.Name="",e.leeditdata.GUID="",e.leeditdata.Frames=[],e.leeditdata.LEConfigs=[],e.isediting=!1},addLeConfig:function(e){console.log("addLeConfig",e);var t=this,o={Keys:[],Color:"0xff0000",Type:0,Count:1};0==e?o.Type=0:1==e?(o.Type=1,o.Count=30):2==e&&(o.Type=2,o.StayCount=1),t.leeditdata.LEConfigs.push(o),t.$nextTick(function(){t.$refs.tb_leconfig.bodyWrapper.scrollTop=t.$refs.tb_leconfig.bodyWrapper.scrollHeight,t.$refs.tb_leconfig.setCurrentRow(t.leeditdata.LEConfigs[t.leeditdata.LEConfigs.length-1]),t.leconfigsel=t.leeditdata.LEConfigs.length-1})},copyLeConfig:function(){var e=this;console.log("copyLeConfig");var t=this,o=t.leconfigsel;if(o<0)return void t.alertInfo(t.$t("le.no_leconfig_select"),"warning",1e3);var i=JSON.parse(n()(t.leeditdata.LEConfigs[o]));t.leeditdata.LEConfigs.push(i),t.$nextTick(function(){t.$refs.tb_leconfig.bodyWrapper.scrollTop=t.$refs.tb_leconfig.bodyWrapper.scrollHeight,t.$refs.tb_leconfig.setCurrentRow(t.leeditdata.LEConfigs[t.leeditdata.LEConfigs.length-1]),e.leconfigsel=t.leeditdata.LEConfigs.length-1})},deleteLeConfig:function(){console.log("deleteLeConfig");var e=this,t=e.leconfigsel;if(e.leeditdata.LEConfigs.length>1&&e.leeditdata.LEConfigs.length-1==t&&(e.leconfigsel=e.leeditdata.LEConfigs.length-2),1==e.leeditdata.LEConfigs.length)return e.leconfigsel=0,e.$refs.tb_leconfig.setCurrentRow(e.leeditdata.LEConfigs[0]),void e.alertInfo(e.$t("le.leconfig_must_keep_at_least_one"),"warning",1e3);e.leconfigsel>=0&&e.leeditdata.LEConfigs.splice(t,1),e.$nextTick(function(){e.leconfigsel>=0?e.$refs.tb_leconfig.setCurrentRow(e.leeditdata.LEConfigs[e.leconfigsel]):e.alertInfo(e.$t("le.no_leconfig_select"),"warning",1e3)})},alertInfo:function(e,t,o){this.$notify({title:e,type:t,duration:o,position:"bottom-right"})}},beforeRouteEnter:function(e,t,o){console.log("Le loading..."),CMS.isLoaded=!1,setTimeout(function(){o(function(e){console.log("Le loaded!"),setTimeout(function(){CMS.isLoaded=!0},500)})},5)}}},587:function(e,t,o){t=e.exports=o(10)(void 0),t.push([e.i,".le-edit-box{position:absolute;bottom:0;left:0}.le-edit-box .el-col:first-child{//padding-right:.8rem;//padding-bottom:0;border-right:2px solid #00a0dd}.le-edit-box .el-table{background:#252525}.le-edit-box .edit-cell{background:#333;-webkit-appearance:none;background-image:none;border-radius:4px;border:1px solid #111;box-sizing:border-box;color:#aaa;display:inline-block;font-size:inherit;height:1.6rem;line-height:1.6rem;outline:0;padding:0 1rem;transition:border-color .2s cubic-bezier(.645,.045,.355,1);width:100%}.le-edit-box .edit-cell.mini{width:2.5rem;padding:0 .2rem;text-align:center}.le-edit-box th{background:#333}.btn-group-flex{display:-ms-flexbox;display:flex}.btn-group-flex button{-ms-flex:1;flex:1}",""])},598:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",[o("el-col",{attrs:{span:24}},[o("el-row",{style:{height:e.lay_show_h+"px",position:"relative"},attrs:{id:"device-show-box"}},[o("cms-device",e._b({ref:"device",attrs:{scale:e.lay_show_scale,scaleplus:e.lay_show_scale_plus,showbtn:e.isshowbtn,isediting:e.isediting},on:{selLeKeys:e.selLeKeys}},"cms-device",e.device,!1)),e._v(" "),o("div",{staticClass:"le-edit-box",style:{width:e.lay_le_edit_w+"px",height:e.lay_le_edit_h+"px"}},[o("el-col",{attrs:{span:8}},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingframe,expression:"loadingframe"}],ref:"tb_frame",staticStyle:{"margin-bottom":"0"},attrs:{data:e.leeditdata.Frames,height:e.lay_le_edit_h-30,"highlight-current-row":"","empty-text":e.$t("common.no_data"),"row-class-name":e.rowClassName},on:{"row-click":e.handleFrameChange}},[o("el-table-column",{attrs:{label:e.$t("le.frame_num"),type:"index"}}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("le.frame_name"),prop:"Name"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;t.$index;return[o("input",{directives:[{name:"model",rawName:"v-model",value:i.Name,expression:"row.Name"}],staticClass:"edit-cell",domProps:{value:i.Name},on:{input:function(t){t.target.composing||e.$set(i,"Name",t.target.value)}}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("le.frame_length"),prop:"Count",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;t.$index;return[o("input",{directives:[{name:"model",rawName:"v-model.number",value:i.Count,expression:"row.Count",modifiers:{number:!0}}],staticClass:"edit-cell",attrs:{type:"number"},domProps:{value:i.Count},on:{input:function(t){t.target.composing||e.$set(i,"Count",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]}}])})],1),e._v(" "),o("el-button-group",{staticClass:"btn-group-flex"},[o("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.addFrame}}),e._v(" "),o("el-button",{attrs:{icon:"el-icon-kb-copy"},on:{click:e.copyFrame}}),e._v(" "),o("el-button",{attrs:{icon:"el-icon-delete",type:"warning"},on:{click:e.deleteFrame}}),e._v(" "),o("el-button",{attrs:{icon:"el-icon-kb-moveup1"},on:{click:e.moveUpFrame}}),e._v(" "),o("el-button",{attrs:{icon:"el-icon-kb-movedown1"},on:{click:e.moveDownFrame}})],1)],1),e._v(" "),o("el-col",{attrs:{span:10}},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingleconfig,expression:"loadingleconfig"}],ref:"tb_leconfig",staticStyle:{"margin-bottom":"0"},attrs:{data:e.leeditdata.LEConfigs,height:e.lay_le_edit_h-30,"highlight-current-row":"","empty-text":e.$t("common.no_data"),"row-class-name":e.rowClassName},on:{"row-click":e.handleLEConfigChange}},[o("el-table-column",{attrs:{label:e.$t("le.color_num"),type:"index"}}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("le.color_effect"),prop:"Type"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;t.$index;return[0==i.Type?o("el-tag",[e._v(e._s(e.$t("le.color_effect_monochrome")))]):1==i.Type?o("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.$t("le.color_effect_rgb")))]):2==i.Type?o("el-tag",{attrs:{type:"danger"}},[e._v(e._s(e.$t("le.color_effect_breathing")))]):e._e()]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("le.color_config"),prop:"Color"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;t.$index;return[o("input",{directives:[{name:"model",rawName:"v-model",value:i.Color,expression:"row.Color"}],staticClass:"edit-cell",style:{background:i.Color.replace("0x","#")},domProps:{value:i.Color},on:{input:function(t){t.target.composing||e.$set(i,"Color",t.target.value)}}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("le.color_param"),prop:"Count"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;t.$index;return[2==i.Type?o("div",[o("input",{directives:[{name:"model",rawName:"v-model.number",value:i.StayCount,expression:"row.StayCount",modifiers:{number:!0}}],staticClass:"edit-cell mini",domProps:{value:i.StayCount},on:{input:function(t){t.target.composing||e.$set(i,"StayCount",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),o("i",{staticClass:"el-icon-kb-switch",staticStyle:{color:"green"}}),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model.number",value:i.Count,expression:"row.Count",modifiers:{number:!0}}],staticClass:"edit-cell mini",domProps:{value:i.Count},on:{input:function(t){t.target.composing||e.$set(i,"Count",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]):o("input",{directives:[{name:"model",rawName:"v-model.number",value:i.Count,expression:"row.Count",modifiers:{number:!0}}],staticClass:"edit-cell",domProps:{value:i.Count},on:{input:function(t){t.target.composing||e.$set(i,"Count",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]}}])})],1),e._v(" "),o("el-button-group",{staticClass:"btn-group-flex"},[o("el-tooltip",{attrs:{placement:"top"}},[o("template",{slot:"content"},[o("el-button-group",[o("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){return e.addLeConfig("0")}}},[e._v(e._s(e.$t("le.color_effect_monochrome")))]),e._v(" "),o("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){return e.addLeConfig("1")}}},[e._v(e._s(e.$t("le.color_effect_rgb")))]),e._v(" "),o("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){return e.addLeConfig("2")}}},[e._v(e._s(e.$t("le.color_effect_breathing")))])],1)],1),e._v(" "),o("el-button",{attrs:{icon:"el-icon-plus"}})],2),e._v(" "),o("el-button",{attrs:{icon:"el-icon-kb-copy"},on:{click:e.copyLeConfig}}),e._v(" "),o("el-button",{attrs:{icon:"el-icon-delete",type:"danger"},on:{click:e.deleteLeConfig}}),e._v(" "),o("el-button",{attrs:{icon:"el-icon-kb-media"},on:{click:e.prePlayLE}}),e._v(" "),o("el-tooltip",{attrs:{placement:"top"}},[o("template",{slot:"content"},[e._v("\r\n                "+e._s(e.$t("common.cancel"))+"\r\n              ")]),e._v(" "),o("el-button",{attrs:{icon:"el-icon-close"},on:{click:e.cancelLeEdit}})],2),e._v(" "),o("el-tooltip",{attrs:{placement:"top"}},[o("template",{slot:"content"},[e._v("\r\n                "+e._s(e.$t("common.save"))+"\r\n              ")]),e._v(" "),o("el-button",{attrs:{icon:"el-icon-check"},on:{click:e.saveLeEdit}})],2)],1)],1),e._v(" "),o("el-col",{staticStyle:{position:"relative"},style:{height:e.lay_le_edit_h+"px"},attrs:{span:6}},[o("cms-color",{staticStyle:{position:"absolute",height:"auto",bottom:".2rem",background:"#333"},style:{width:e.lay_le_edit_color_w+"px"},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}})],1),e._v(" "),o("div",{staticClass:"disablediv",class:{disablehide:!e.disableleediter}})],1),e._v(" "),o("div",{staticStyle:{position:"absolute",right:"0",top:"0"},style:{width:e.lay_lelist_w+"px",height:e.lay_lelist_h+"px"}},[o("cms-lelist",e._b({ref:"les",attrs:{height:e.lay_lelist_h,leseltype:"2",title:e.$t("le.le_lib_title")},on:{playLE:e.playLE,editLE:e.editLE}},"cms-lelist",e.les,!1))],1)],1)],1)],1)},n=[],l={render:i,staticRenderFns:n};t.a=l},609:function(e,t,o){var i=o(587);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);o(18)("03e5cb0c",i,!0,{})}});