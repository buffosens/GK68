webpackJsonp([3,14],{109:function(e,t,o){"use strict";function i(e){o(551)}Object.defineProperty(t,"__esModule",{value:!0});var l=o(542),r=o(550),s=o(26),n=i,a=s(l.a,r.a,!1,n,null,null);t.default=a.exports},111:function(e,t,o){"use strict";function i(e){o(557)}Object.defineProperty(t,"__esModule",{value:!0});var l=o(544),r=o(555),s=o(26),n=i,a=s(l.a,r.a,!1,n,null,null);t.default=a.exports},542:function(e,t,o){"use strict";t.a={data:function(){return{isstatic:!0,loading:!0,disabled:!1,color:"red",precolors:["#ff0000","#ffff00","#00ff00","#00ffff","#0000ff","#ff00ff","#cc0019","#ff2a00","#ff7200","#ffc000","#f9ff00","#8aff00","#00ff4e","#aa00ff","#00a59b","#14ae67","#28a7e1","#0d6fb8","#122a88","#171c61","#601986","#920783","#a40a5e","#800080","#ff4500","#00ced1","#00c2ff","#ff00aa","#ffffff","#000000"],colorhex:"#FF0000",hueh:130,huepostop:0,colorboxposright:0,colorboxpostop:0,colorbarmousedown:!1,colorboxmousedown:!1,issellcode:!1}},props:[],created:function(){},mounted:function(){this.initColorPicker()},computed:{},watch:{colorhex:function(e,t){e!=t&&(DEVICE.isEditStaticLE||this.triggerSelLeCode())}},methods:{initColorPicker:function(){this.hueh=this.$refs.colorpbox.querySelector(".color-bar").offsetHeight,this.huepostop=0,this.colorboxposright=0,this.colorboxpostop=0},getElementPageLeft:function(e){for(var t=e.offsetLeft,o=e.offsetParent;null!=o;)t+=o.offsetLeft+(o.offsetWidth-o.clientWidth)/2,o=o.offsetParent;return t},getElementPageTop:function(e){for(var t=e.offsetTop,o=e.offsetParent;null!=o;)t+=o.offsetTop+(o.offsetHeight-o.clientHeight)/2,o=o.offsetParent;return t},setHuePos:function(e){var t=this;t.colorbarmousedown=!0,t.moveHuePos(e)},moveHuePos:function(e){var t=this;if(t.colorbarmousedown){var o=e.currentTarget.parentNode.parentNode,i=o.querySelector(".color-current"),l=(o.querySelector("input"),t.getElementPageTop(o));e.clientY-(l+6)<=0?t.huepostop=0:e.clientY-(l+6)>=t.hueh?t.huepostop=t.hueh:t.huepostop=e.clientY-(l+6);var r=parseInt(this.huepostop/t.hueh*360);i.style.background="hsl("+r+",100%,50%)",t.resetColor()}},setColorBoxPos:function(e){var t=this;t.colorboxmousedown=!0,t.moveColorBoxPos(e)},moveColorBoxPos:function(e){var t=this;if(t.colorboxmousedown){var o=e.currentTarget.parentNode.parentNode,i=(o.querySelector(".color-current"),o.querySelector("input"),t.getElementPageTop(o)),l=t.getElementPageLeft(o);e.clientY-(i+6)<=0?t.colorboxpostop=0:e.clientY-(i+6)>=t.hueh?t.colorboxpostop=t.hueh:t.colorboxpostop=e.clientY-(i+6),e.clientX-(l+6)<=0?t.colorboxposright=t.hueh:e.clientX-(l+6)>=t.hueh?t.colorboxposright=0:t.colorboxposright=t.hueh-(e.clientX-(l+6)),t.resetColor()}},stopDrag:function(){this.colorboxmousedown=!1,this.colorbarmousedown=!1},resetColor:function(){var e=this,t=parseInt(this.huepostop/e.hueh*360),o=100*(1-this.colorboxposright/e.hueh),i=100*(1-this.colorboxpostop/e.hueh),l=window.fromRGB(window.fromHSB({h:t,s:o,b:i}));e.colorhex=l,DEVICE.editStaticLEColor=l},setCurrentColor:function(e){this.colorhex=e,DEVICE.editStaticLEColor=e},triggerSelLeCode:function(){this.issellcode=!this.issellcode,DEVICE.isEditStaticLE=this.issellcode},alertInfo:function(e,t,o){this.$notify({title:e,type:t,duration:o,position:"bottom"})}}}},544:function(e,t,o){"use strict";var i=o(64),l=o.n(i),r=o(109);t.a={data:function(){return{loading:!0,schfilter:"",lefilter:"",activeName:"1",filterlelist:[],leselname:"",isbreath:!1,disabled:!1,iseditloading:!1,newle:{Name:"",GUID:"",LeType:"simple"}}},props:["title","height","lelist","lesel","leseltype","isstaticle"],created:function(){},components:{"cms-lestatic":r.default},mounted:function(){var e=this;setTimeout(function(){e.filterlelist=e.lelist,e.loading=!1,e.$nextTick(function(){e.leSelected(e.lesel)})},1e3)},watch:{schfilter:function(e,t){var o=this;this.filterlelist=this.lelist.filter(function(t){return~t.Name.indexOf(e)}),this.$nextTick(function(){o.leSelected(o.lesel)})},lesel:function(e,t){e!==t&&this.leSelected(e)}},computed:{mode:function(){return DEVICE.currentProfile?DEVICE.currentProfile.ModeIndex:1},hasModeLe:function(){return!!CMS.deviceConfig.hasModeLe}},methods:{handleRowChange:function(e,t,o){var i=this;1==this.leseltype&&DEVICE.currentProfile.ModeLE.GUID!==e.GUID?((0==DEVICE.currentProfile.ModeIndex||this.hasModeLe&&[2,3,4].indexOf(this.mode)>=0)&&(DEVICE.currentProfile.ModeLE.GUID=e.GUID,DEVICE.currentProfile.ModeLE.Name=e.Name),this.leSelected(e.GUID)):2==this.leseltype&&(DEVICE.leeditsel=e.GUID),i.playLE(e.GUID)},handleSaveModeLE:function(){DEVICE.isEditStaticLE&&this.$refs.lestatic&&this.$refs.lestatic.triggerSelLeCode(),1==this.leseltype&&this.isbreath?this.$emit("saveModeLE"):2==this.leseltype&&console.log("灯效没有变更！")},leSelected:function(e){var t=this;if(this.hasModeLe||!([2,3,4].indexOf(DEVICE.currentProfile)>=0)||"1"!=this.leseltype){var o=this,i=o.filterlelist.length;DEVICE.isEditStaticLE&&o.$refs.lestatic&&o.$refs.lestatic.triggerSelLeCode(),e?(o.filterlelist.forEach(function(l,r){if(l.GUID===e){o.leselname=l.Name,o.$refs.lestable.setCurrentRow(l);var s=o.$refs.lestable.bodyWrapper.scrollHeight,n=r/i;1===DEVICE.currentProfile.ModeIndex?(o.$refs.lestable.bodyWrapper.scrollTop=s*n-80,o.isbreath=!1):e===window.cprofile.ModeLE.GUID?(o.$refs.lestable.bodyWrapper.scrollTop=s*n-80,o.isbreath=!1):(0===DEVICE.currentProfile.ModeIndex||t.hasModeLe&&[2,3,4].indexOf(t.mode)>=0)&&(o.isbreath=!0)}}),o.playLE(e)):o.leUnSelectAll()}},leUnSelectAll:function(){this.$refs.lestable.setCurrentRow()},playLE:function(e){var t=this;window.readLE(e,function(e){DEVICE.timer&&(clearInterval(DEVICE.timer),DEVICE.timer=null),window.LeData=e,t.$emit("playLE")})},editLe:function(){this.$emit("editLE")},addLe:function(){var e=this;if(e.newle.Name||(e.newle.Name=e.$t("le.le_name")+(CMS.les.length+1)),e.isLeExist(e.newle.Name))return void e.alertInfo(e.$t("le.le_already_exist"),"warning",800);e.newle.GUID=window.getGuid(),CMS.deviceConfig.LeCate?e.newle.LeCate=CMS.deviceConfig.LeCate:delete e.newle.LeCate;var t=JSON.parse(l()(e.newle));t.Frames=[{Count:1,Name:"frame0",Data:{}}],t.LEConfigs=[{Type:0,Count:1,Color:"0xff0000",Keys:[]}],window.writeLE(t.GUID,t,function(o){delete t.Frames,delete t.LEConfigs,CMS.les.push(t),window.writeLEList(CMS.les,function(){e.alertInfo(e.$t("le.le_create_success"),"success",500),e.$nextTick(function(){e.$refs.lestable.bodyWrapper.scrollTop=e.$refs.lestable.bodyWrapper.scrollHeight,e.leSelected(t.GUID)})})})},copyLe:function(){console.log("copyLe");var e=this,t=JSON.parse(l()(LeData));if(t.Name=t.Name+"_"+CMS.les.length,t.GUID=window.getGuid(),e.isLeExist(t.Name))return void e.alertInfo(e.$t("le.le_already_exist"),"warning",800);window.writeLE(t.GUID,t,function(o){delete t.Frames,delete t.LEConfigs,CMS.les.push(t),window.writeLEList(CMS.les,function(){e.alertInfo(e.$t("le.le_copy_success"),"success",500),e.$nextTick(function(){e.$refs.lestable.bodyWrapper.scrollTop=e.$refs.lestable.bodyWrapper.scrollHeight,e.leSelected(t.GUID)})})})},deleteLe:function(){console.log("deleteLe");var e=this;e.$confirm(e.$t("le.le_confirm_delete"),e.$t("common.attention"),{confirmButtonText:e.$t("common.confirm"),cancelButtonText:e.$t("common.cancel"),type:"warning"}).then(function(){var t=LeData.GUID;window.deleteLE(t,function(){for(var o=0;o<CMS.les.length;o++)if(CMS.les[o].GUID==t){CMS.les.splice(o,1);break}window.writeLEList(CMS.les,function(){e.alertInfo(e.$t("le.le_delete_success"),"success",800)})})}).catch(function(){e.alertInfo(e.$t("le.le_delete_cancelled"),"info",800)})},importLe:function(){var e=this;window.importLE(function(t){for(var o=JSON.parse(t),i=!0,l=0;l<CMS.les.length;l++)CMS.les[l].GUID===o.GUID&&(i=!1,o.Name=CMS.les[l].Name,e.$confirm(e.$t("le.le_aready_exist_confirm_overwrite"),e.$t("common.attention"),{confirmButtonText:e.$t("common.confirm"),cancelButtonText:e.$t("common.cancel"),type:"warning"}).then(function(){window.writeLE(o.GUID,o,function(t){e.alertInfo(e.$t("le.le_import_success"),"success",500)})}).catch(function(){e.alertInfo(e.$t("le.le_import_cancelled"),"success",500)}));i&&window.writeLE(o.GUID,o,function(t){delete o.Frames,delete o.LEConfigs,delete o.Canvases,CMS.les.push(o),window.writeLEList(CMS.les,function(){e.alertInfo(e.$t("le.le_import_success"),"success",500)})})})},exportLe:function(){var e=this;window.exportLE(LeData,function(t){e.alertInfo(e.$t("le.le_export_success"),"success",500)})},isLeExist:function(e){for(var t=0;t<CMS.les.length;t++)if(CMS.les[t].Name==e)return!0;return!1},reNameLE:function(){console.log("rename le")},alertInfo:function(e,t,o){this.$notify({title:e,type:t,duration:o,position:"bottom-left"})},disableLE:function(){this.isbreath=!1,DEVICE.isEditStaticLE&&this.$refs.lestatic&&this.$refs.lestatic.triggerSelLeCode()}}}},549:function(e,t,o){t=e.exports=o(10)(void 0),t.push([e.i,".colorpicker,.predefine{height:32px;line-height:32px}.predefine,.predefine ul li{display:inline-block}.predefine ul li{float:left;width:24px;height:24px;background:blue;list-style:none;margin-left:.8rem}.color-picker{position:relative;z-index:10;padding:6px;box-sizing:content-box;background-color:#3a3939;border-radius:4px;box-shadow:0 2px 12px 0 rgba(0,0,0,.1);display:-ms-flexbox;display:flex;width:100%;box-sizing:border-box}.color-select{-ms-flex:3;flex:3}.color-preset{-ms-flex:2;flex:2;position:relative}.color-current{width:80%;padding-top:80%;float:left;background:red;position:relative}.color-black,.color-white{position:absolute;top:0;left:0;right:0;bottom:0}.color-white{background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.color-black{background:linear-gradient(0deg,#000,hsla(0,0%,100%,0))}.color-dot{position:absolute;right:0;top:0;width:4px;height:4px;border:1px solid #fff;margin:-3px;border-radius:2px;cursor:crosshair}.color-bar{float:right;position:relative;width:14%;margin-right:3%;padding-top:80%;background:linear-gradient(180deg,red 0,#ff0 16.7%,#0f0 33.4%,#0ff 50.1%,#00f 66.8%,#f0f 83.4%,red)}.color-bar-pos{position:absolute;cursor:pointer;box-sizing:border-box;left:0;top:100px;width:100%;height:4px;border-radius:1px;background:#fff;border:1px solid #f0f0f0;box-shadow:0 0 2px rgba(0,0,0,.6);z-index:1;margin-top:-2px;margin-bottom:-2px}.color-sets{display:-ms-flexbox;display:flex;width:100%;margin-block-start:0;margin-block-end:0;margin-inline-start:0;margin-inline-end:0;padding-inline-start:0;-webkit-margin-before:0;-webkit-margin-after:0;-webkit-margin-start:0;-webkit-margin-end:0;-webkit-padding-start:0;box-sizing:content-box;display:-webkit-flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap}.color-sets li{margin:0 0 2%;padding:0;float:left;width:15%;min-width:15%;max-width:15%;padding-bottom:15%;border:1px solid #ccc;background:#00c2ff;list-style:none;display:inline-block;-ms-flex:1;flex:1;border-radius:10%;box-sizing:border-box;cursor:pointer}.color-sets li.selected{box-shadow:0 0 3px 2px #409eff}.color-val{clear:both;position:absolute;bottom:0;width:100%;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.color-val,.color-val input{height:1.8rem;line-height:1.8rem;text-align:center}.color-val input{-ms-flex:5;flex:5;border:none;box-sizing:border-box}.color-val i{-ms-flex:2;flex:2}.color-state-btn{-ms-flex:3;flex:3;height:1.8rem;line-height:1.8rem;border-radius:.2rem;background-color:#333;border:1px solid #000;display:inline-block;color:red;cursor:pointer}.color-state-btn i{height:1.8rem;line-height:1.8rem;font-size:1.2rem}.color-state-btn.active{border-color:#00c2ff}.color-state-btn.active i{font-size:1.3rem;font-weight:700;color:#0f0}",""])},550:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"colorpbox",staticClass:"color-picker",attrs:{id:"colorpbox"}},[o("div",{staticClass:"color-select",on:{mouseup:e.stopDrag}},[o("div",{staticClass:"color-current",on:{mousedown:function(t){return e.setColorBoxPos(t)},mousemove:function(t){return e.moveColorBoxPos(t)}}},[o("div",{staticClass:"color-white"}),e._v(" "),o("div",{staticClass:"color-black"}),e._v(" "),o("div",{staticClass:"color-dot",style:{top:e.colorboxpostop+"px",right:e.colorboxposright+"px"}})]),e._v(" "),o("div",{staticClass:"color-bar",on:{mousedown:function(t){return e.setHuePos(t)},mousemove:function(t){return e.moveHuePos(t)}}},[o("div",{staticClass:"color-bar-pos",style:{top:e.huepostop+"px"}})])]),e._v(" "),o("div",{staticClass:"color-preset"},[o("ul",{staticClass:"color-sets"},e._l(e.precolors,function(t,i){return o("li",{key:i,class:{selected:e.colorhex==t},style:{backgroundColor:t},on:{click:function(o){return e.setCurrentColor(t)}}})}),0),e._v(" "),o("div",{staticClass:"color-val"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.colorhex,expression:"colorhex"}],style:{backgroundColor:e.colorhex},attrs:{type:""},domProps:{value:e.colorhex},on:{input:function(t){t.target.composing||(e.colorhex=t.target.value)}}}),e._v(" "),o("i",{staticClass:"el-icon-back",staticStyle:{color:"green"}}),e._v(" "),o("div",{staticClass:"color-state-btn",class:{active:e.issellcode},on:{click:e.triggerSelLeCode}},[o("i",{staticClass:"el-icon-kb-select"})])])]),e._v(" "),e._e()])},l=[],r={render:i,staticRenderFns:l};t.a=r},551:function(e,t,o){var i=o(549);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);o(18)("4e1ffed3",i,!0,{})},553:function(e,t,o){t=e.exports=o(10)(void 0),t.push([e.i,".el-input-group__prepend{width:3rem}.tb-lelist i{font-size:1.2rem;color:#888}",""])},555:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{staticStyle:{"z-index":"4"}},[o("el-col",{staticStyle:{padding:".5rem"},attrs:{span:24}},[o("el-card",{staticStyle:{position:"relative"},attrs:{accordion:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("div",{staticClass:"disablediv",class:{disablehide:0==e.mode||e.hasModeLe&&[2,3,4].indexOf(e.mode)>=0||"2"==e.leseltype}}),e._v(" "),o("template",{slot:"header"},[o("i",{staticClass:"header-icon el-icon-kb-light3"}),e._v("  "+e._s(e.title)+" ( "),o("el-tag",[e._v(e._s(e.lelist.length))]),e._v(" )\n      ")],1),e._v(" "),e.isstaticle?o("div",{staticStyle:{width:"100%"},attrs:{id:"staticlebox"}},[o("cms-lestatic",{ref:"lestatic"})],1):e._e(),e._v(" "),o("el-input",{staticClass:"input-with-select",attrs:{placeholder:e.$t("common.input_search_text"),size:"mini"},model:{value:e.schfilter,callback:function(t){e.schfilter=t},expression:"schfilter"}},[o("template",{slot:"prepend"},[e._v(e._s(e.$t("menu.menu_le_lib")))]),e._v(" "),o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],2),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"lestable",staticClass:"tb-lelist",attrs:{data:e.filterlelist,"show-header":!1,border:"",height:e.height,size:"mini","highlight-current-row":"",setCurrentRow:e.leSelected,"row-dblclick":e.reNameLE,"empty-text":e.$t("common.no_data")},on:{"row-click":e.handleRowChange}},[o("el-table-column",{attrs:{"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return["combination"==t.row.LeType?o("i",{staticClass:"el-icon-kb-cate1"}):80==t.row.LeCate?o("i",{staticClass:"el-icon-kb-mouse-left"}):1760==t.row.LeCate?o("i",{staticClass:"el-icon-kb-system"}):o("i",{staticClass:"el-icon-kb-light1"}),e._v(" "),o("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.Name))])]}}])})],1),e._v(" "),1==e.leseltype?o("div",{staticClass:"list-oper"},[o("el-tag",{staticStyle:{flex:"7",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},attrs:{size:"small",type:"success"}},[e._v(e._s(e.leselname||e.$t("common.unset")))]),e._v(" "),o("i",{staticClass:"el-icon-back",staticStyle:{color:"green",flex:"1",margin:"auto"}}),e._v(" "),o("el-button",{class:{"btn-breath":e.isbreath},staticStyle:{flex:"2"},attrs:{icon:"el-icon-view",loading:!1},on:{click:e.handleSaveModeLE}},[e._v(e._s(e.$t("common.use")))]),e._v(" "),e._e()],1):2==e.leseltype?o("div",{staticStyle:{padding:".2rem .3rem .3rem"}},[o("el-button-group",{staticStyle:{display:"flex"}},[o("el-button",{staticStyle:{flex:"1"},attrs:{icon:"el-icon-edit",loading:e.iseditloading},on:{click:e.editLe}}),e._v(" "),o("el-popover",{attrs:{placement:"left",trigger:"click"}},[o("el-form",{staticClass:"pop-form",attrs:{inline:!0}},[o("el-form-item",[o("el-input",{model:{value:e.newle.Name,callback:function(t){e.$set(e.newle,"Name",t)},expression:"newle.Name"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.addLe}},[e._v(e._s(e.$t("common.create")))])],1)],1),e._v(" "),o("el-button",{staticStyle:{flex:"1"},attrs:{slot:"reference",icon:"el-icon-plus"},slot:"reference"})],1),e._v(" "),o("el-button",{staticStyle:{flex:"1"},attrs:{icon:"el-icon-kb-copy"},on:{click:e.copyLe}}),e._v(" "),o("el-button",{staticStyle:{flex:"1"},attrs:{icon:"el-icon-delete",type:"danger"},on:{click:e.deleteLe}}),e._v(" "),o("el-button",{staticStyle:{flex:"1"},attrs:{icon:"el-icon-upload2"},on:{click:e.importLe}}),e._v(" "),o("el-button",{staticStyle:{flex:"1"},attrs:{icon:"el-icon-download"},on:{click:e.exportLe}})],1)],1):e._e()],2)],1)],1)},l=[],r={render:i,staticRenderFns:l};t.a=r},557:function(e,t,o){var i=o(553);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);o(18)("542aff16",i,!0,{})}});